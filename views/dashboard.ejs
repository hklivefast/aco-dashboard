<div class="hero">
  <h1>Welcome, <%= user.username %>! ðŸ‘‹</h1>
  <p>Your ACO Dashboard - Track products, releases, and checkouts</p>
</div>

<div class="grid grid-4">
  <div class="card stat-card">
    <div class="stat-value"><%= products.filter(p => p.category === 'Pokemon - Target').length %></div>
    <div class="stat-label">Pokemon Products</div>
  </div>
  <div class="card stat-card">
    <div class="stat-value"><%= products.filter(p => p.category === 'Sports Cards').length %></div>
    <div class="stat-label">Sports Cards</div>
  </div>
  <div class="card stat-card">
    <div class="stat-value"><%= products.filter(p => p.category === 'One Piece').length %></div>
    <div class="stat-label">One Piece TCG</div>
  </div>
  <div class="card stat-card">
    <div class="stat-value"><%= checkouts.length %></div>
    <div class="stat-label">Your Checkouts</div>
  </div>
</div>

<div class="grid grid-2">
  <div class="card">
    <div class="card-header">
      <h2 class="card-title">Your Recent Checkouts</h2>
      <a href="/products" class="btn btn-primary btn-sm">Add Checkout</a>
    </div>
    
    <% if (checkouts.length > 0) { %>
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Product</th>
            <th>Status</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody>
          <% checkouts.forEach(function(checkout) { %>
          <tr>
            <td>
              <% if (checkout.product_name) { %>
                <%= checkout.product_name %>
              <% } else if (checkout.sku) { %>
                <%= checkout.sku %>
              <% } else { %>
                Unknown Product
              <% } %>
            </td>
            <td>
              <span class="badge badge-<%= checkout.status === 'success' ? 'success' : (checkout.status === 'pending' ? 'warning' : 'danger') %>">
                <%= checkout.status %>
              </span>
            </td>
            <td><%= new Date(checkout.created_at).toLocaleDateString() %></td>
          </tr>
          <% }); %>
        </tbody>
      </table>
    </div>
    <% } else { %>
    <div class="empty-state">
      <p class="empty-state-icon">ðŸ“¦</p>
      <p>No checkouts yet. <a href="/products" style="color: var(--primary);">Browse products</a> to get started!</p>
    </div>
    <% } %>
  </div>

  <div class="card">
    <div class="card-header">
      <h2 class="card-title">Upcoming Releases</h2>
      <a href="/releases" class="btn btn-outline btn-sm">View All</a>
    </div>
    
    <% if (releases.length > 0) { %>
      <% releases.slice(0, 5).forEach(function(release) { %>
      <div class="release-card">
        <div class="release-date">ðŸ“… <%= new Date(release.release_date).toLocaleDateString() %></div>
        <div class="release-name"><%= release.name %></div>
        <% if (release.google_form_url) { %>
        <a href="<%= release.google_form_url %>" target="_blank" class="btn btn-primary btn-sm mt-2">Sign Up</a>
        <% } %>
      </div>
      <% }); %>
    <% } else { %>
    <div class="empty-state">
      <p>No upcoming releases scheduled.</p>
    </div>
    <% } %>
  </div>
</div>

<div class="card mt-2">
  <div class="card-header">
    <h2 class="card-title">Quick Actions</h2>
  </div>
  <div class="d-flex gap-2">
    <a href="/products" class="btn btn-primary">Browse Products</a>
    <a href="/releases" class="btn btn-success">View Releases</a>
    <% if (user.isAdmin) { %>
    <a href="/admin" class="btn btn-warning">Admin Panel</a>
    <% } %>
  </div>
</div>
